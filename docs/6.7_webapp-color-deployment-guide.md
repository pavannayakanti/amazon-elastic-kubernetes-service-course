
# Deploy `webapp-color` Application and Expose via LoadBalancer

This guide helps you deploy a simple Kubernetes application and expose it using a LoadBalancer service on AWS.

---

## üì¶ Step 1: Create Deployment

Create a file named `webapp-color-deployment.yaml` with the following contents:

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: webapp-color
  labels:
    app: webapp-color
spec:
  replicas: 3
  selector:
    matchLabels:
      app: webapp-color
  template:
    metadata:
      labels:
        app: webapp-color
    spec:
      containers:
      - name: webapp-color
        image: kodekloud/webapp-color
        ports:
        - containerPort: 8080
```

---

## üåê Step 2: Create Service

Create a file named `webapp-color-service.yaml` with the following contents:

```yaml
apiVersion: v1
kind: Service
metadata:
  name: webapp-color
  namespace: default
  annotations:
    service.beta.kubernetes.io/aws-load-balancer-type: "nlb"
    service.beta.kubernetes.io/aws-load-balancer-internal: "false"
spec:
  type: LoadBalancer
  selector:
    app: webapp-color
  ports:
    - protocol: TCP
      port: 80
      targetPort: 8080
```

---

## üöÄ Step 3: Apply the YAML Files

Run the following commands to create the deployment and service:

```bash
kubectl apply -f webapp-color-deployment.yaml
kubectl apply -f webapp-color-service.yaml
```

> ‚ö†Ô∏è It may take a few minutes for the LoadBalancer to be provisioned and register its targets.

---

## ‚úÖ Verification Checklist

- [ ] Is the `webapp-color` deployment created?

  ```bash
  kubectl get deployments
  ```

- [ ] Is the `webapp-color` service created with `LoadBalancer` type?

  ```bash
  kubectl get svc webapp-color
  ```

Look for `EXTERNAL-IP` to confirm the LoadBalancer is provisioned.

---
